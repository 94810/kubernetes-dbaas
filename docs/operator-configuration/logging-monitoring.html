<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<title data-react-helmet="true">Logging &amp; troubleshooting | Kubernetes Database-as-a-Service</title><meta data-react-helmet="true" property="og:url" content="https://criscola.github.io/kubernetes-dbaas/kubernetes-dbaas/docs/operator-configuration/logging-monitoring"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Logging &amp; troubleshooting | Kubernetes Database-as-a-Service"><meta data-react-helmet="true" name="description" content="Overview"><meta data-react-helmet="true" property="og:description" content="Overview"><link data-react-helmet="true" rel="shortcut icon" href="/kubernetes-dbaas/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://criscola.github.io/kubernetes-dbaas/kubernetes-dbaas/docs/operator-configuration/logging-monitoring"><link data-react-helmet="true" rel="alternate" href="https://criscola.github.io/kubernetes-dbaas/kubernetes-dbaas/docs/operator-configuration/logging-monitoring" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://criscola.github.io/kubernetes-dbaas/kubernetes-dbaas/docs/operator-configuration/logging-monitoring" hreflang="x-default"><link rel="stylesheet" href="/kubernetes-dbaas/assets/css/styles.2cf4fd45.css">
<link rel="preload" href="/kubernetes-dbaas/assets/js/runtime~main.ef09c43f.js" as="script">
<link rel="preload" href="/kubernetes-dbaas/assets/js/main.bca3c5cf.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/kubernetes-dbaas/"><img src="/kubernetes-dbaas/img/logo.svg" alt="Kubernetes Database-as-a-Service logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/kubernetes-dbaas/img/logo.svg" alt="Kubernetes Database-as-a-Service logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Home</b></a><a class="navbar__item navbar__link navbar__link--active" href="/kubernetes-dbaas/docs/overview">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/bedag/kubernetes-dbaas" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/kubernetes-dbaas/docs/overview">Overview</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">DBMS configuration</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Operator configuration</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-dbaas/docs/operator-configuration/prerequisites">Prerequisites</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-dbaas/docs/operator-configuration/main-configuration">Main configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-dbaas/docs/operator-configuration/databaseclasses">DatabaseClass</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-dbaas/docs/operator-configuration/credential-rotation">Credential rotation</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/kubernetes-dbaas/docs/operator-configuration/logging-monitoring">Logging &amp; troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-dbaas/docs/operator-configuration/cli-arguments">CLI arguments</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/kubernetes-dbaas/docs/operator-configuration/tips-and-tricks">Tips &amp; tricks</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Operator deployment</a></li><li class="menu__list-item"><a class="menu__link" href="/kubernetes-dbaas/docs/usage">Usage</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Contributing</a></li><li class="menu__list-item"><a class="menu__link" href="/kubernetes-dbaas/docs/legals">Legals</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">Logging &amp; troubleshooting</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>By default <code>--debug</code> is set to false, in this case the production logger is initialized.
If <code>--debug</code> is set to true the development logger is initialized instead.</p><p>The development logger has pretty printing, suited for command-line consumption.</p><p>The production logger has JSON output and sampling.</p><p>Make sure to have a look at <a href="/kubernetes-dbaas/docs/operator-configuration/cli-arguments">CLI arguments</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="troubleshooting"></a>Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">#</a></h2><p>You can troubleshoot problems in two ways:</p><ol><li>Look at the events of the resource with <code>kubectl describe db my-database-resource </code></li><li>Consult the logs of the manager pod.</li></ol><p>To avoid leaking possibly sensitive information, events do not contain the full error description, they contain a message along with some helpful values, if present.
Thus, you should refer to the logging output if you need to obtain deeper information about the problem.</p><p>You can control the verbosity of the logger by setting the <code>--log-level &lt;int&gt;</code> flag.</p><ul><li><code>0</code>: Info level</li><li><code>1</code>: Debug Level</li><li><code>2</code>: Trace level</li></ul><p>Errors are always logged.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="example-of-event"></a>Example of event<a class="hash-link" href="#example-of-event" title="Direct link to heading">#</a></h3><p>The following shows what is written to the Database resource when it is written to the cluster and the relative DB instance
is provisioned successfully on the DBMS endpoint:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">Type    Reason                    Age     From                   Message</span></span><span class="token-line" style="color:#393A34"><span class="token plain">----    ------                    ----    ----                   -------</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Normal  DatabaseCreateInProgress  1s      database-controller    database instance is being provisioned on dbms endpoint</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Normal  DatabaseCreateSuccess     1s      database-controller    database instance provisioned successfully on dbms endpoint</span></span><span class="token-line" style="color:#393A34"><span class="token plain">Normal  SecretCreateSuccess       1s      database-controller    secret created successfully: </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;secret&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;database-sample-789-credentials&quot;</span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sampling"></a>Sampling<a class="hash-link" href="#sampling" title="Direct link to heading">#</a></h2><p>Sampling is enabled in production mode for every log entry with same level and message. The first 100 entries in one second
are logged, after that only one entry is logged every 100 entries until the next second.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="metrics"></a>Metrics<a class="hash-link" href="#metrics" title="Direct link to heading">#</a></h2><p>Metrics are information related to the operational status of the Operator, e.g. how much memory it
consumes. A ServiceMonitor resource is included, which enables Prometheus to scrape metrics from the
Operator. Metrics are written to the <code>/metrics</code> endpoint of the Operator.</p><p>Metrics are protected using <a href="https://github.com/brancz/kube-rbac-proxy" target="_blank" rel="noopener noreferrer">kube-rbac-proxy</a>, a small HTTP proxy that can perform RBAC authorization
against the Kubernetes API. It is deployed alongside the controller, acting as a proxy for inbound requests.</p><p>See also the <a href="https://book.kubebuilder.io/reference/metrics.html" target="_blank" rel="noopener noreferrer">kubebuilder documentation</a> about metrics.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="additional-information"></a>Additional information<a class="hash-link" href="#additional-information" title="Direct link to heading">#</a></h2><p>Stacktraces can be enabled by setting the flag <code>--enable-stacktrace</code> to <code>true</code>. Defaults to <code>true</code> in debug mode.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/bedag/kubernetes-dbaas/edit/main/website/docs/operator-configuration/logging-monitoring.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/kubernetes-dbaas/docs/operator-configuration/credential-rotation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Credential rotation</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/kubernetes-dbaas/docs/operator-configuration/cli-arguments"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CLI arguments Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#troubleshooting" class="table-of-contents__link">Troubleshooting</a><ul><li><a href="#example-of-event" class="table-of-contents__link">Example of event</a></li></ul></li><li><a href="#sampling" class="table-of-contents__link">Sampling</a></li><li><a href="#metrics" class="table-of-contents__link">Metrics</a></li><li><a href="#additional-information" class="table-of-contents__link">Additional information</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/kubernetes-dbaas/docs/overview">Documentation</a></li><li class="footer__item"><a href="https://pkg.go.dev/github.com/bedag/kubernetes-dbaas" target="_blank" rel="noopener noreferrer" class="footer__link-item">Godocs</a></li><li class="footer__item"><a class="footer__link-item" href="/kubernetes-dbaas/docs/contributing/how-to-contribute">Contributing</a></li><li class="footer__item"><a class="footer__link-item" href="/kubernetes-dbaas/docs/legals">Legals</a></li></ul></div><div class="col footer__col"><div class="footer__title">Links</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/bedag/kubernetes-dbaas" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Source code<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/bedag/kubernetes-dbaas/issues" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Issue tracker<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://hub.docker.com/r/bedag/kubernetes-dbaas" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>DockerHub repository<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="#" class="footer__link-item">ArtifactHub repository</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://www.bedag.ch" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Bedag Informatik AG<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/bedag" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.instagram.com/bedaginformatik" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 <a href="https://github.com/criscola">Cristiano Colangelo</a> â€” Developed for Bedag Informatik AG. <br></div></div></div></footer></div>
<script src="/kubernetes-dbaas/assets/js/runtime~main.ef09c43f.js"></script>
<script src="/kubernetes-dbaas/assets/js/main.bca3c5cf.js"></script>
</body>
</html>